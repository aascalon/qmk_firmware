// Copyright 2023 QMK
// SPDX-License-Identifier: GPL-2.0-or-later
#include "quantum.h" 

#include QMK_KEYBOARD_H
enum layer_names {
    _BASE,
    _ALTIUM_SCH,
    _ALTIUM_PCB
};

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
    /*
     * ┌───┐
     * │Enc│
     * ├───┼───┬───┬───┐
     * │ NL│ / │ * │ - │
     * ├───┼───┼───┼───┤
     * │ 7 │ 8 │ 9 │   │
     * ├───┼───┼───┤ + │
     * │ 4 │ 5 │ 6 │   │
     * ├───┼───┼───┼───┤
     * │ 1 │ 2 │ 3 │   │
     * ├───┴───┼───┤Ent│
     * │   0   │ . │   │
     * └───────┴───┴─`──┘
     */
    [_BASE] = LAYOUT(
        KC_A,
        KC_LNUM,  KC_PSLS, KC_PAST, KC_PMNS, 
        KC_P7,    KC_P8,   KC_P9, 
        KC_P4,    KC_P5,   KC_P6,   KC_PPLS,
        KC_P1,    KC_P2,   KC_P3,   
        KC_P0,    KC_PDOT, KC_PENT
    ),
    [_ALTIUM_SCH] = LAYOUT(
        KC_PAUSE,
        KC_LNUM,  KC_PSLS, KC_PAST, KC_PMNS, 
        // Place wire     Rubber-stamp
        LCTL(KC_W),    LCTL(KC_R),   KC_P9, 
        KC_P4,    KC_P5,   KC_P6,   KC_PPLS,
        KC_P1,    KC_P2,   KC_P3,   
        //         // Smart Paste     
        KC_P0,     LCTL(LSFT(KC_V)), KC_PENT
    ),
    [_ALTIUM_PCB] = LAYOUT(
        KC_PAUSE,
        KC_LNUM,  KC_PSLS, KC_PAST, KC_PMNS, 
        KC_P7,    KC_P8,   KC_P9, 
        KC_P4,    KC_P5,   KC_P6,   KC_PPLS,
        KC_P1,    KC_P2,   KC_P3,   
        KC_P0,    KC_PDOT, KC_PENT
    ),
};
// OLED Layer indicator bitmaps 
const char numpad[] PROGMEM =  {
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0xfe, 0x3c, 0x30, 0xe0, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0xfe, 0xfc, 0x00, 0x00, 0xc0, 0xe0, 0x00, 0x00, 0x00, 0x00, 0xe0, 0xe0, 0x00, 0x00, 0xc0, 0xe0, 
        0x80, 0xc0, 0x60, 0xe0, 0xc0, 0xc0, 0x60, 0x60, 0xe0, 0xc0, 0x00, 0x00, 0x00, 0xe0, 0xe0, 0xc0, 
        0x60, 0x60, 0x60, 0xc0, 0x80, 0x00, 0x00, 0x80, 0xc0, 0xe0, 0x60, 0x60, 0x60, 0xc0, 0x00, 0x00, 
        0x00, 0x80, 0xc0, 0x60, 0x60, 0x60, 0x60, 0xc0, 0xff, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0x00, 0x00, 0x00, 0x01, 0x03, 0x0e, 0x1c, 0x38, 0x70, 
        0xe1, 0xff, 0x00, 0x00, 0x3f, 0x7f, 0xc0, 0xc0, 0xc0, 0xc0, 0xff, 0xff, 0x00, 0x00, 0x7f, 0xff, 
        0x01, 0x00, 0x00, 0x07, 0xff, 0x40, 0x00, 0x00, 0x01, 0xff, 0xf8, 0x00, 0x00, 0xff, 0xff, 0xc0, 
        0xc0, 0xc0, 0xe0, 0x7f, 0x3f, 0x00, 0x1e, 0x7f, 0xe1, 0xc0, 0xc0, 0xc0, 0x67, 0x7f, 0xe0, 0x00, 
        0x00, 0x3f, 0x61, 0xc0, 0xc0, 0xc0, 0xc0, 0x60, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x0f, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    };
const char altium_sch[] PROGMEM =  {
        0x00, 0xf0, 0xf8, 0xfc, 0xfc, 0xfe, 0x3e, 0x3e, 0x7c, 0xfc, 0xf8, 0xf0, 0xf0, 0xe0, 0xe0, 0xc0, 
        0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x1f, 0x1f, 0x0f, 0x0f, 0x07, 0x00, 0x80, 0x80, 0xc0, 0xc1, 0x01, 0x03, 0x03, 0x07, 0xff, 
        0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0xf8, 0x18, 0x18, 0x18, 0x38, 
        0xf0, 0xe0, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xe0, 0x60, 0x70, 0x30, 0x30, 0xf0, 0xf0, 0x00, 0x00, 
        0xf0, 0xf8, 0x18, 0x18, 0x18, 0x38, 0xf0, 0xe0, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0xf8, 0xfc, 0xfc, 0xfe, 0xff, 0x1f, 0x0f, 0x0f, 0x07, 0x03, 0x00, 0x80, 0x80, 0xc0, 0xff, 
        0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0x18, 0x18, 0x18, 0x1c, 
        0x0f, 0x07, 0x00, 0x60, 0xfc, 0xff, 0x03, 0x01, 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x00, 0x00, 
        0xff, 0xff, 0x1c, 0x18, 0x1c, 0x1c, 0x3f, 0xf7, 0xe1, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x0f, 0x1f, 0x1f, 0x3f, 0x7f, 0x7c, 0x7c, 0x3e, 0x3e, 0x1f, 0x1f, 0x0f, 0x07, 0x07, 0x03, 
        0x03, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x07, 0x06, 0x06, 0x06, 0x07, 0x03, 0x01, 0x00, 0x00, 0x00, 
        0x07, 0x07, 0x06, 0x06, 0x06, 0x07, 0x03, 0x03, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    };

const char altium_pcb[] PROGMEM =  {
        0x00, 0xf0, 0xf8, 0xfc, 0xfc, 0xfe, 0x3e, 0x3e, 0x7c, 0xfc, 0xf8, 0xf0, 0xf0, 0xe0, 0xe0, 0xc0, 
        0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x1f, 0x1f, 0x0f, 0x0f, 0x07, 0x00, 0x80, 0x80, 0xc0, 0xc1, 0x01, 0x03, 0x03, 0x07, 0xff, 
        0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xe0, 0xf0, 0x18, 0x18, 0x18, 
        0x18, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xc0, 0xc0, 0xc0, 0xc0, 0x80, 0x00, 0x00, 
        0xfe, 0xfe, 0x80, 0x80, 0xc0, 0xc0, 0xc0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x80, 0xc0, 0xc0, 0xc0, 
        0xc0, 0xc0, 0x80, 0x00, 0x00, 0x80, 0xc0, 0x80, 0x80, 0xc0, 0xc0, 0xc0, 0x80, 0xc0, 0xc0, 0xc0, 
        0xc0, 0x00, 0x00, 0x00, 0x00, 0x80, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0x80, 0x00, 0x40, 0xc0, 0xc0, 
        0xf8, 0xf8, 0xc0, 0xc0, 0xc0, 0x00, 0x00, 0xc8, 0xcc, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x80, 0xc0, 
        0xc0, 0xc0, 0xc0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0xf8, 0xfc, 0xfc, 0xfe, 0xff, 0x1f, 0x0f, 0x0f, 0x07, 0x03, 0x00, 0x80, 0x80, 0xc0, 0xff, 
        0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x60, 0xe0, 0xc1, 0x83, 0x83, 0x83, 0x83, 
        0x87, 0xc6, 0xfe, 0x7c, 0x00, 0x00, 0x7e, 0xff, 0xc3, 0x80, 0x80, 0x80, 0xc1, 0xc1, 0x00, 0x00, 
        0xff, 0xff, 0x07, 0x01, 0x00, 0x00, 0x7f, 0xff, 0xe0, 0x00, 0x18, 0x7f, 0xff, 0x99, 0x9c, 0x8c, 
        0x8e, 0x87, 0xc3, 0x40, 0x00, 0xff, 0xff, 0x8f, 0x03, 0x01, 0x07, 0xff, 0xff, 0x01, 0x00, 0x03, 
        0xff, 0xff, 0x00, 0x3c, 0xff, 0xff, 0x81, 0x80, 0x80, 0xc6, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 
        0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7f, 0xff, 0x00, 0x00, 0x00, 0x7e, 0xff, 0xc3, 0x80, 
        0x80, 0x80, 0xc1, 0xc1, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x0f, 0x1f, 0x1f, 0x3f, 0x7f, 0x7c, 0x7c, 0x3e, 0x3e, 0x1f, 0x1f, 0x0f, 0x07, 0x07, 0x03, 
        0x03, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 
        0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 
        0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 
        0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 0x00, 
        0x01, 0x01, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 
        0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 
        0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    };

const char *const oled_layer_screens[] PROGMEM = {numpad, altium_sch, altium_pcb};
// OLED task call
#ifdef OLED_ENABLE

bool oled_task_user() {
    uint8_t current_layer = get_highest_layer(default_layer_state);
    const char *display_array = (const char *)pgm_read_word(&(oled_layer_screens[current_layer]));
    
    oled_write_raw_P(display_array, 512);

    return false;
}

#endif

#if defined(ENCODER_MAP_ENABLE)
const uint16_t PROGMEM encoder_map[][NUM_ENCODERS][NUM_DIRECTIONS] = {
    [_BASE] = { ENCODER_CCW_CW(DF(_ALTIUM_PCB), DF(_ALTIUM_SCH)) },
    [_ALTIUM_SCH] = { ENCODER_CCW_CW(DF(_BASE), DF(_ALTIUM_PCB)) } ,
    [_ALTIUM_PCB] = { ENCODER_CCW_CW(DF(_ALTIUM_SCH), DF(_BASE)) },

};
#endif